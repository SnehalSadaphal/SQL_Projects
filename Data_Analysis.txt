1]Which iPhone model had the highest sales?
--Using MAX Function
sqlite> select model_name from iPhone_Models where model_id in (select model_id from Sales_data order by units_sold desc limit 1);
iPhone 13 Pro

--Using Group by, Order by
sqlite> select im.model_name, sum(sd.units_sold * sd.price) as 'Total_sales' from iPhone_Models im join Sales_data sd on im.model_id=sd.model_id group by im.model_name order by Total_sales desc limit 1;
iPhone 13 Pro|1319988.0

--Using a Subquery
sqlite> select model_name from (select im.model_name, sum(sd.units_sold * sd.price) as Total_sales from Sales_data sd join iPhone_Models im on sd.model_id=im.model_id group by im.model_name) Subquery order by Total_sales desc limit 1;
iPhone 13 Pro

--Using a CTE
sqlite> with highest_sale as(
select im.model_name, sum(sd.units_sold * sd.price) as Total_sales from Sales_data sd join iPhone_Models im on sd.model_id=im.model_id group by im.model_name
)
select model_name from highest_sale order by Total_sales desc limit 1;
iPhone 13 Pro

2]What was the average price of iPhones over time?
--Using AVG Function
sqlite> select avg(price) from sales_data;
1049.99

--Using STRFTIME() Function (for SQLite):
sqlite> select strftime('%Y', sale_date) As Year, Avg(price) from Sales_data group by strftime('%Y',sale_date) order by Year;
2023|1049.99

--Using a CTE
sqlite> with Average_Price as (
    select strftime('%Y', sale_date) As Year, Avg(price) as Avg_Price from Sales_data
)
select Year, Avg_Price from Average_Price group by Year order by Year;
2023|1049.99

